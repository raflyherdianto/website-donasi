{# Macro untuk page header #}
{% macro page_header(title, subtitle=None) %}
<div class="mb-6 md:mb-8">
    <h2 class="text-2xl md:text-3xl font-semibold text-gray-800 mb-2">{{ title }}</h2>
    {% if subtitle %}
    <p class="text-gray-600 text-sm md:text-base">{{ subtitle }}</p>
    {% endif %}
</div>
{% endmacro %}

{# Macro untuk card container #}
{% macro card(title=None, class="bg-white p-4 md:p-6 rounded-lg shadow-md") %}
<div class="{{ class }}">
    {% if title %}
    <h3 class="text-lg md:text-xl font-semibold text-gray-800 mb-4">{{ title }}</h3>
    {% endif %}
    {{ caller() }}
</div>
{% endmacro %}

{# Macro untuk stats card #}
{% macro stats_card(title, value, icon=None, color="blue") %}
<div class="bg-white rounded-lg shadow p-4 md:p-6 text-center hover:shadow-lg transition-shadow">
    {% if icon %}
    <div class="flex justify-center mb-3">
        <i class="{{ icon }} text-2xl md:text-3xl text-{{ color }}-600"></i>
    </div>
    {% endif %}
    <h3 class="text-xs md:text-sm text-gray-500 uppercase font-medium">{{ title }}</h3>
    <p class="text-2xl md:text-3xl font-bold text-{{ color }}-700 mt-2">{{ value }}</p>
</div>
{% endmacro %}

{# Macro untuk action button #}
{% macro action_button(text, url=None, onclick=None, type="primary", size="md", icon=None, class="") %}
{% set button_classes = {
    'primary': 'bg-blue-600 hover:bg-blue-700 text-white',
    'secondary': 'bg-gray-600 hover:bg-gray-700 text-white',
    'success': 'bg-green-600 hover:bg-green-700 text-white',
    'warning': 'bg-yellow-600 hover:bg-yellow-700 text-white',
    'danger': 'bg-red-600 hover:bg-red-700 text-white'
} %}

{% set size_classes = {
    'sm': 'px-3 py-1 text-sm',
    'md': 'px-4 py-2',
    'lg': 'px-6 py-3 text-lg'
} %}

{% if url %}
<a href="{{ url }}" class="{{ button_classes[type] }} {{ size_classes[size] }} rounded transition duration-200 inline-flex items-center {{ class }}">
    {% if icon %}<i class="{{ icon }} mr-2"></i>{% endif %}
    {{ text }}
</a>
{% else %}
<button {% if onclick %}onclick="{{ onclick }}"{% endif %} 
        type="button" 
        class="{{ button_classes[type] }} {{ size_classes[size] }} rounded transition duration-200 inline-flex items-center {{ class }}">
    {% if icon %}<i class="{{ icon }} mr-2"></i>{% endif %}
    {{ text }}
</button>
{% endif %}
{% endmacro %}

{# Macro untuk data table wrapper #}
{% macro data_table(id, class="min-w-full text-sm text-gray-700") %}
<div class="bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden">
    <div class="overflow-x-auto">
        <table id="{{ id }}" class="{{ class }} w-full">
            {{ caller() }}
        </table>
    </div>
</div>
{% endmacro %}

{# Macro untuk modal wrapper #}
{% macro modal(id, title, size="md") %}
{% set size_classes = {
    'sm': 'w-11/12 md:w-1/3',
    'md': 'w-11/12 md:w-1/2',
    'lg': 'w-11/12 md:w-2/3',
    'xl': 'w-11/12 md:w-3/4'
} %}

<div id="{{ id }}" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full hidden z-50">
    <div class="relative top-10 mx-auto p-5 border {{ size_classes[size] }} shadow-lg rounded-md bg-white max-h-screen overflow-y-auto">
        <div class="mt-3">
            <!-- Modal Header -->
            <div class="flex items-center justify-between mb-6">
                <h3 class="text-lg md:text-xl font-semibold text-gray-900">{{ title }}</h3>
                <button type="button" onclick="closeModal('{{ id }}')" class="text-gray-400 hover:text-gray-600">
                    <i class="fas fa-times text-lg"></i>
                </button>
            </div>

            <!-- Modal Content -->
            {{ caller() }}
        </div>
    </div>
</div>
{% endmacro %}

{# Macro untuk form group #}
{% macro form_group(label, name, type="text", required=False, placeholder=None, value=None, options=None, class="") %}
<div class="mb-4 {{ class }}">
    <label for="{{ name }}" class="block text-sm font-medium text-gray-700 mb-1">
        {{ label }}
        {% if required %}<span class="text-red-500">*</span>{% endif %}
    </label>
    
    {% if type == "select" and options %}
    <select id="{{ name }}" name="{{ name }}" 
            class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 p-2"
            {% if required %}required{% endif %}>
        {% for option in options %}
        <option value="{{ option.value }}" {% if value == option.value %}selected{% endif %}>
            {{ option.text }}
        </option>
        {% endfor %}
    </select>
    {% elif type == "textarea" %}
    <textarea id="{{ name }}" name="{{ name }}" rows="4"
              class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 p-2"
              {% if placeholder %}placeholder="{{ placeholder }}"{% endif %}
              {% if required %}required{% endif %}>{{ value or '' }}</textarea>
    {% else %}
    <input type="{{ type }}" id="{{ name }}" name="{{ name }}"
           class="mt-1 block w-full border border-gray-300 rounded-md shadow-sm focus:ring-blue-500 focus:border-blue-500 p-2"
           {% if placeholder %}placeholder="{{ placeholder }}"{% endif %}
           {% if value %}value="{{ value }}"{% endif %}
           {% if required %}required{% endif %}>
    {% endif %}
</div>
{% endmacro %}
