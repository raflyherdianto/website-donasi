<div class="grid grid-cols-1 md:grid-cols-2 gap-6">
    <div>
        <h4 class="font-semibold text-gray-800 mb-3">Informasi Perpustakaan</h4>
        <div class="space-y-2 text-sm">
            <div><strong>Nama:</strong> {{ pengajuan.perpus.nama }}</div>
            <div><strong>Kecamatan:</strong> {{ pengajuan.perpus.kecamatan }}</div>
            <div><strong>Desa:</strong> {{ pengajuan.perpus.desa }}</div>
        </div>
    </div>
    
    <div>
        <h4 class="font-semibold text-gray-800 mb-3">Informasi Pengajuan</h4>
        <div class="space-y-2 text-sm">
            <div><strong>Tanggal Pengajuan:</strong> {{ pengajuan.tanggal_pengajuan.strftime('%d %B %Y') }}</div>
            <div><strong>Prioritas:</strong> 
                <span class="priority-badge priority-{{ pengajuan.prioritas }}">
                    {{ pengajuan.prioritas.title() }}
                </span>
            </div>
            <div><strong>Status:</strong> 
                <span class="status-badge status-{{ pengajuan.status }}">
                    {% if pengajuan.status == 'pending' %}
                        Menunggu
                    {% elif pengajuan.status == 'approved' %}
                        Disetujui
                    {% elif pengajuan.status == 'rejected' %}
                        Ditolak
                    {% endif %}
                </span>
            </div>
            {% if pengajuan.lokasi %}
            <div><strong>Lokasi:</strong> <a href="{{ pengajuan.lokasi }}" target="_blank" class="text-blue-600 hover:underline">Lihat di Maps</a></div>
            {% endif %}
        </div>
    </div>
</div>

{% if pengajuan.alasan %}
<div class="mt-6">
    <h4 class="font-semibold text-gray-800 mb-3">Alasan Pengajuan</h4>
    <p class="text-sm text-gray-700 bg-gray-50 p-3 rounded-md">{{ pengajuan.alasan }}</p>
</div>
{% endif %}

<div class="mt-6">
    <h4 class="font-semibold text-gray-800 mb-3">Detail Kebutuhan Buku</h4>
    <div class="overflow-x-auto">
        <table class="min-w-full bg-white border border-gray-200 rounded-lg">
            <thead class="bg-gray-50">
                <tr>
                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">No</th>
                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Subjek Buku</th>
                    <th class="px-4 py-3 text-center text-xs font-medium text-gray-500 uppercase tracking-wider">Jumlah Buku</th>
                </tr>
            </thead>
            <tbody class="divide-y divide-gray-200">
                {% for detail in pengajuan.detail_kebutuhan %}
                <tr>
                    <td class="px-4 py-3 text-sm text-gray-900">{{ loop.index }}</td>
                    <td class="px-4 py-3 text-sm font-medium text-gray-900">{{ detail.subjek.nama }}</td>
                    <td class="px-4 py-3 text-sm text-gray-900 text-center">{{ detail.jumlah_buku }} buku</td>
                </tr>
                {% endfor %}
                <tr class="bg-gray-50">
                    <td colspan="2" class="px-4 py-3 text-sm font-semibold text-gray-900">Total Kebutuhan:</td>
                    <td class="px-4 py-3 text-sm font-semibold text-gray-900 text-center">
                        {{ pengajuan.detail_kebutuhan|sum(attribute='jumlah_buku') }} buku
                    </td>
                </tr>
            </tbody>
        </table>
    </div>
</div>

<div class="mt-6">
    <h4 class="font-semibold text-gray-800 mb-3">Pesan</h4>
    <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
        <p class="text-sm text-gray-700" data-pesan>
            {{ pengajuan.pesan if pengajuan.pesan else 'Belum ada pesan' }}
        </p>
    </div>
</div>

<style>
.priority-badge {
    padding: 3px 8px;
    border-radius: 10px;
    font-size: 10px;
    font-weight: 600;
    text-transform: uppercase;
}

.priority-tinggi {
    background-color: #fee2e2;
    color: #991b1b;
}

.priority-sedang {
    background-color: #fef3c7;
    color: #92400e;
}

.priority-rendah {
    background-color: #d1fae5;
    color: #065f46;
}

.status-badge {
    padding: 4px 8px;
    border-radius: 12px;
    font-size: 11px;
    font-weight: 600;
    text-transform: uppercase;
}

.status-pending {
    background-color: #fef3c7;
    color: #92400e;
}

.status-approved {
    background-color: #d1fae5;
    color: #065f46;
}

.status-rejected {
    background-color: #fee2e2;
    color: #991b1b;
}
</style>
