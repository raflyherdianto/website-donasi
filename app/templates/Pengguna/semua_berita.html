{% extends "pengguna/base_public.html" %}
{% from "pengguna/content_wrapper.html" import content_container, grid_container, news_card %}

{% block title %}Semua Berita - Donasi Buku Perpustakaan Desa{% endblock %}

{% block content %}
{% call content_container("7xl", "px-4 sm:px-6 py-8") %}
  
  <!-- Back Button -->
  <a href="{{ url_for('public.home') }}" class="inline-flex items-center text-blue-600 hover:text-blue-800 mb-6 font-medium transition-colors">
    <i class="fa-solid fa-arrow-left mr-2"></i>
    Kembali ke Beranda
  </a>

  <!-- Page Header -->
  <div class="text-center mb-8 sm:mb-12">
    <h1 class="text-3xl sm:text-4xl font-bold text-gray-800 mb-4">Semua Berita</h1>
    <p class="text-gray-600 text-base sm:text-lg px-4">Ikuti perkembangan terbaru kegiatan perpustakaan di Kabupaten Lumajang</p>
    
    <!-- Search Form -->
    <div class="max-w-md mx-auto mt-6">
      <form method="GET" action="{{ url_for('public.semua_berita') }}" class="flex">
        <input type="text" name="search" value="{{ search }}" placeholder="Cari berita..." class="flex-1 px-4 py-2 border border-gray-300 rounded-l-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent text-sm sm:text-base">
        <button type="submit" class="bg-blue-600 text-white px-4 sm:px-6 py-2 rounded-r-lg hover:bg-blue-700 transition duration-200">
          <i class="fas fa-search"></i>
        </button>
      </form>
    </div>
  </div>

  {% if news_list %}
  <!-- News Grid -->
  {% call grid_container("grid-cols-1 sm:grid-cols-2 lg:grid-cols-3", "gap-6 sm:gap-8") %}
    {% for news in news_list %}
      {{ news_card(news) }}
    {% endfor %}
  {% endcall %}

  <!-- Pagination -->
  {% if pagination.pages > 1 %}
  <div class="flex justify-center mt-8 sm:mt-12">
    <nav class="flex space-x-1 sm:space-x-2">
      
      <!-- Previous Button -->
      {% if pagination.has_prev %}
      <a href="{{ url_for('public.semua_berita', page=pagination.prev_num, search=search) }}" class="px-2 sm:px-3 py-2 bg-gray-200 text-gray-600 rounded hover:bg-gray-300 transition duration-200 text-sm sm:text-base">
        <i class="fa-solid fa-chevron-left"></i>
      </a>
      {% else %}
      <span class="px-2 sm:px-3 py-2 bg-gray-100 text-gray-400 rounded text-sm sm:text-base cursor-not-allowed">
        <i class="fa-solid fa-chevron-left"></i>
      </span>
      {% endif %}
      
      <!-- Page Numbers -->
      {% for page_num in pagination.iter_pages(left_edge=1, right_edge=1, left_current=1, right_current=2) %}
        {% if page_num %}
          {% if page_num != pagination.page %}
          <a href="{{ url_for('public.semua_berita', page=page_num, search=search) }}" class="px-2 sm:px-3 py-2 bg-gray-200 text-gray-600 rounded hover:bg-gray-300 transition duration-200 text-sm sm:text-base">{{ page_num }}</a>
          {% else %}
          <span class="px-2 sm:px-3 py-2 bg-blue-600 text-white rounded text-sm sm:text-base">{{ page_num }}</span>
          {% endif %}
        {% else %}
        <span class="px-2 sm:px-3 py-2 text-gray-400 text-sm sm:text-base">â€¦</span>
        {% endif %}
      {% endfor %}
      
      <!-- Next Button -->
      {% if pagination.has_next %}
      <a href="{{ url_for('public.semua_berita', page=pagination.next_num, search=search) }}" class="px-2 sm:px-3 py-2 bg-gray-200 text-gray-600 rounded hover:bg-gray-300 transition duration-200 text-sm sm:text-base">
        <i class="fa-solid fa-chevron-right"></i>
      </a>
      {% else %}
      <span class="px-2 sm:px-3 py-2 bg-gray-100 text-gray-400 rounded text-sm sm:text-base cursor-not-allowed">
        <i class="fa-solid fa-chevron-right"></i>
      </span>
      {% endif %}
      
    </nav>
  </div>
  
  <!-- Pagination Info -->
  <div class="text-center mt-4 text-sm text-gray-600">
    Menampilkan {{ pagination.per_page * (pagination.page - 1) + 1 }} - {{ pagination.per_page * (pagination.page - 1) + pagination.items|length }} dari {{ pagination.total }} berita
    {% if search %}untuk pencarian "{{ search }}"{% endif %}
  </div>
  {% endif %}
  
  {% else %}
  <!-- No News Found -->
  <div class="text-center py-16">
    <div class="mx-auto w-24 h-24 mb-6 text-gray-300">
      <i class="fas fa-newspaper text-6xl"></i>
    </div>
    <h3 class="text-xl font-semibold text-gray-600 mb-2">
      {% if search %}
      Tidak ada berita ditemukan untuk "{{ search }}"
      {% else %}
      Belum Ada Berita
      {% endif %}
    </h3>
    <p class="text-gray-500 mb-4">
      {% if search %}
      Coba kata kunci yang berbeda atau lihat semua berita.
      {% else %}
      Berita tentang kegiatan perpustakaan akan ditampilkan di sini.
      {% endif %}
    </p>
    {% if search %}
    <a href="{{ url_for('public.semua_berita') }}" class="bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700 transition duration-200">
      Lihat Semua Berita
    </a>
    {% endif %}
  </div>
  {% endif %}

{% endcall %}
{% endblock %}